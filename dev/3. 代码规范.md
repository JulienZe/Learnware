# Learnware Market 代码规范

## 1 类和函数命名
* 关于类名使用大驼峰方法
* 函数使用小写和下划线的形式

## 2 相对引用和绝对引用
* 在learnware包内务必使用相对 import 的方法
* 在learnware包外使用绝对 import 的方法

## 3 如果读取通用配置
* 在需要一些全局配置时使用下属语句进行获取全局配置 (包内相对引用使用)

```python  
from learnware.config import C 
print(C.root_path) # 获取项目全局路径
```

* 如果要修改或者增添全局配置，直接在 learnware.config 的 _DEFAULT_CONFIG 中进行增删和修改即可

## 4 关于路径硬编码
* 请勿使用路径硬编码
* 例如我想的到当前文件的文件夹路径，我可以用下述语句：

```python
os.path.dirname(os.path.abspath(__file__))
```

* 例如我想获取文件根目录路径下的cache文件夹，我可以使用下述语句：

```python  
from learnware.config import C 
cache_dirpath  = os.path.join(C.root_path, 'cache')
```

## 5 关于通用函数的位置
* 全局通用函数请写在 learn.utils 中
* 如果是子包通用函数，写在该子包的 utils 中即可，例如 learnware.specification.utils 中存放了 generate_stat_spec 作为该子包通用函数

## 6 关于如何打 log
* 当出现一些不符合期待行为（例如参数缺失等），请使用 logger 功能 (包内相对引用使用)
* 例子:

```python
from learnware.logger import get_module_logger

def function(self):
    self.logger = get_module_logger(self.__class__.__name__)
    self.logger.info("this is a info")
    self.logger.warning("this is a warning")
```

## 7 关于 raise error
* 在出现错误的时候请使用 raise error, 大概有：
  * NotImplementedError
  * ValueError
  * KeyError
  等等，具体请在具体网站进行学习。
* Error 中请务必填写报错信息，例如：
```python
    raise ValueError("variable a should not be value")
```

## 8 关于注释 docstring
* 在新增方法和接口的时候请注明各个参数类型和返回值类型，方便自动文档生成
  ```python
    def function(self, a: int, b: Dict[int, float], c: List[str] = None) -> Union[int, List[int]]:
  ```
  * 其中 Union[int, List[int]] 表示返回值是 int 或者关于 int 的 list
  * Dict[int, float] 表示是键值是 int，值是 float 的字典
  * List[str] 表示内容是 str 的 list
  * 这些 Dict, List 关键字都在 typing 里面，具体可以搜索 python 的 typing 包

* 使用 numpy 风格的 docstring 进行注释填写
  * 可以使用 vscode 的 AutoDocstring 插件，然后设置成 numpy 风格自动生成（自动生成方法在方法下面输入 """ 后按回车即可自动生成，然后去填一些描述即可）
  * 也可以使用 pycharm 对应的功能（我不太懂，可以百度）

* 具体 docstring 格式可以参考已写接口